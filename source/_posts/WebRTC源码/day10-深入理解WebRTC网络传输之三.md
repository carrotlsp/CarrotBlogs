---

title: day10-深入理解WebRTC网络传输之三
categories:
  - WebRTC源码
tags:
  - WebRTC
date: 2022-09-05 20:41:31
---

## 三、收集各种candidate



### 1、STUN存在的目的是什么？

- 进行NAT穿越

![image-20220904161013652](day10-深入理解WebRTC网络传输之三/image-20220904161013652.png)

![image-20220904161017011](day10-深入理解WebRTC网络传输之三/image-20220904161017011.png)

![image-20220904161020464](day10-深入理解WebRTC网络传输之三/image-20220904161020464.png)

![image-20220904161023544](day10-深入理解WebRTC网络传输之三/image-20220904161023544.png)

![image-20220904161028105](day10-深入理解WebRTC网络传输之三/image-20220904161028105.png)

![image-20220904161031139](day10-深入理解WebRTC网络传输之三/image-20220904161031139.png)

![image-20220904161034276](day10-深入理解WebRTC网络传输之三/image-20220904161034276.png)

![image-20220904161038071](day10-深入理解WebRTC网络传输之三/image-20220904161038071.png)

![image-20220904161041702](day10-深入理解WebRTC网络传输之三/image-20220904161041702.png)

![image-20220904161044970](day10-深入理解WebRTC网络传输之三/image-20220904161044970.png)

![image-20220904161048154](day10-深入理解WebRTC网络传输之三/image-20220904161048154.png)

![image-20220904161051899](day10-深入理解WebRTC网络传输之三/image-20220904161051899.png)

![image-20220904161055085](day10-深入理解WebRTC网络传输之三/image-20220904161055085.png)

![image-20220904161058535](day10-深入理解WebRTC网络传输之三/image-20220904161058535.png)

### 2、WebRTC发送stun的过程？

![image-20220904161107212](day10-深入理解WebRTC网络传输之三/image-20220904161107212.png)

![image-20220904161111712](day10-深入理解WebRTC网络传输之三/image-20220904161111712.png)

![image-20220904161115756](day10-深入理解WebRTC网络传输之三/image-20220904161115756.png)

![image-20220904161119329](day10-深入理解WebRTC网络传输之三/image-20220904161119329.png)

![image-20220904161123118](day10-深入理解WebRTC网络传输之三/image-20220904161123118.png)

![image-20220904161126946](day10-深入理解WebRTC网络传输之三/image-20220904161126946.png)

![image-20220904161716364](day10-深入理解WebRTC网络传输之三/image-20220904161716364.png)

### 3、WebRTC 收集 SrflxCandidate 的过程？

![image-20220904161724690](day10-深入理解WebRTC网络传输之三/image-20220904161724690.png)

![image-20220904161728714](day10-深入理解WebRTC网络传输之三/image-20220904161728714.png)

![image-20220904161732338](day10-深入理解WebRTC网络传输之三/image-20220904161732338.png)

### 4、认识 TRUN 协议？

![image-20220904161743038](day10-深入理解WebRTC网络传输之三/image-20220904161743038.png)

![image-20220904161746271](day10-深入理解WebRTC网络传输之三/image-20220904161746271.png)

![image-20220904161749887](day10-深入理解WebRTC网络传输之三/image-20220904161749887.png)

### 5、WebRTC如何收集TCP类型的Candidate？

![image-20220904161756965](day10-深入理解WebRTC网络传输之三/image-20220904161756965.png)

![image-20220904161759866](day10-深入理解WebRTC网络传输之三/image-20220904161759866.png)

### 6、WebRTC如何将获得Candidate抛给上层的呢？

- 首先抛给上层的目的，就是让上层能够进行网络信息的交换

![image-20220904161814632](day10-深入理解WebRTC网络传输之三/image-20220904161814632.png)

![image-20220904161818174](day10-深入理解WebRTC网络传输之三/image-20220904161818174.png)

### 7、WebRTC中网络连接的建立？

![image-20220904161825822](day10-深入理解WebRTC网络传输之三/image-20220904161825822.png)

![image-20220904161829914](day10-深入理解WebRTC网络传输之三/image-20220904161829914.png)

![image-20220904161839223](day10-深入理解WebRTC网络传输之三/image-20220904161839223.png)

- 有三种方式会创建出connection对象，WebRTC会创建出很多connection对象，但是最终大部分会被裁剪

### 8、WebRTC 如何对 Connection 进行排序？

![image-20220904161854636](day10-深入理解WebRTC网络传输之三/image-20220904161854636.png)

![image-20220904161858592](day10-深入理解WebRTC网络传输之三/image-20220904161858592.png)

![image-20220904161902021](day10-深入理解WebRTC网络传输之三/image-20220904161902021.png)

![image-20220904161905499](day10-深入理解WebRTC网络传输之三/image-20220904161905499.png)

![image-20220904161909737](day10-深入理解WebRTC网络传输之三/image-20220904161909737.png)

![image-20220904161912827](day10-深入理解WebRTC网络传输之三/image-20220904161912827.png)

![image-20220904161916017](day10-深入理解WebRTC网络传输之三/image-20220904161916017.png)

![image-20220904161919381](day10-深入理解WebRTC网络传输之三/image-20220904161919381.png)

![image-20220904161922777](day10-深入理解WebRTC网络传输之三/image-20220904161922777.png)

### 9、WebRTC 如何选择 Connection_ev ?

![image-20220904161929497](day10-深入理解WebRTC网络传输之三/image-20220904161929497.png)

![image-20220904161932519](day10-深入理解WebRTC网络传输之三/image-20220904161932519.png)

![image-20220904161935587](day10-深入理解WebRTC网络传输之三/image-20220904161935587.png)

![image-20220904161939749](day10-深入理解WebRTC网络传输之三/image-20220904161939749.png)

![image-20220904161943210](day10-深入理解WebRTC网络传输之三/image-20220904161943210.png)

### 10、WebRTC 如何对connection进行裁剪？

![image-20220904161951786](day10-深入理解WebRTC网络传输之三/image-20220904161951786.png)

![image-20220904161955354](day10-深入理解WebRTC网络传输之三/image-20220904161955354.png)

![image-20220904161959599](day10-深入理解WebRTC网络传输之三/image-20220904161959599.png)

![image-20220904162003720](day10-深入理解WebRTC网络传输之三/image-20220904162003720.png)

![image-20220904162006712](day10-深入理解WebRTC网络传输之三/image-20220904162006712.png)

### 10、ICE提名的意义是什么？WebRTC 如何进行 ICE 提名？

> 由于ICE会收集到很多Candidate，并且可以与对端的Candidate形成许多CandidatePair，如果针对于每个Pair都做检测，会花很长时间，因此有了ICE提名。

![image-20220904162019559](day10-深入理解WebRTC网络传输之三/image-20220904162019559.png)

![image-20220904162022375](day10-深入理解WebRTC网络传输之三/image-20220904162022375.png)

![image-20220904162025439](day10-深入理解WebRTC网络传输之三/image-20220904162025439.png)

![image-20220904162029251](day10-深入理解WebRTC网络传输之三/image-20220904162029251.png)

![image-20220904162032725](day10-深入理解WebRTC网络传输之三/image-20220904162032725.png)

### 12、ICE-FULL 和 ICE-LITE 有什么作用？有什么区别？

![image-20220904162039951](day10-深入理解WebRTC网络传输之三/image-20220904162039951.png)

![image-20220904162043385](day10-深入理解WebRTC网络传输之三/image-20220904162043385.png)

![image-20220904162048253](day10-深入理解WebRTC网络传输之三/image-20220904162048253.png)

![image-20220904162052319](day10-深入理解WebRTC网络传输之三/image-20220904162052319.png)

![image-20220904162056311](day10-深入理解WebRTC网络传输之三/image-20220904162056311.png)

### 13、WebRTC如何进行连通性检测？

![image-20220904162107995](day10-深入理解WebRTC网络传输之三/image-20220904162107995.png)



![image-20220904162111684](day10-深入理解WebRTC网络传输之三/image-20220904162111684.png)

![image-20220904162115141](day10-深入理解WebRTC网络传输之三/image-20220904162115141.png)

![image-20220904162118436](day10-深入理解WebRTC网络传输之三/image-20220904162118436.png)

![image-20220904162122426](day10-深入理解WebRTC网络传输之三/image-20220904162122426.png)

![image-20220904162126498](day10-深入理解WebRTC网络传输之三/image-20220904162126498.png)

![image-20220904162129845](day10-深入理解WebRTC网络传输之三/image-20220904162129845.png)

### 14、WebRTC中网络传输类的创建与数据传输？

> 前面学习了：Connection对象的创建、排序、选择、裁剪、连通性检测

![image-20220904162144732](day10-深入理解WebRTC网络传输之三/image-20220904162144732.png)

> 上图可知道两个重要知识点
>
> ①WebRTC底层网络对象是如何一步一步创建出来的，总的入口点是 `PeerConnection`
>
> ②本地采集的数据，是通过哪些对象分发出去的。入口点是 `BaseChannel`，出口点是 `SocketDispatcher`。
>
> ③远端传入的数据是，如何传递给WebRTC上层进行播放的。首先会收到一个读事件，然后给到 `SocketDispatcher`，最后一层层给到上层。
>
> 【这幅图非常非常关键，不理解可以结合视频继续理解】







